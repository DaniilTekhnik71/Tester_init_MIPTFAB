# Tester_init_MIPTFAB
ОПИСАНИЕ РАБОТЫ

1. При включении тестера без его подключения к гнезду USB, тестер переходит в режим измерения сопротивлений дата линий порта USB, при этом на экране надпись USB RESISTOR и перемигиваются светодиоды OK (зеленый) и BAD (красный), этот режим еще показывает, что обе линии оборваны при подключении его к порту USB

2. Дата лини проверяются по одной и вместе относительно земли, а так же между собой. Результат выводиться на экран:

- если все нормально - ОК, горит светодиод GOOD (зеленый)

- если одна из дата линий закорочена или имеет низкое сопротивление, меньше 200 Ом, то на экране надпись этой линии : -D или +D, загорается светодиод BAD(красный) и TX(желтый), если -D и RX(синий), если +D, а так же буззер кратко временно пищит

- если обе линии закорочены на землю или малое сопротивление, загораются светодиод BAD(красный) TX(желтый) RX(синий) , а так же буззер кратко временно пищит

- если одна из линий нормальная, а другая, оборвана или -D или +D, на экране -D>kOm или +D>kOm, загорается светодиод BAD(красный), мигает TX(желтый) или RX(синий), а так же буззер кратко временно пищит

- если обе линии закорочены между собой, на экране D-+, загорается светодиод BAD(красный), загораются светодиоды TX(желтый) и RX(синий), а так же буззер кратко временно пищит

3. Режим инициализации,производится тестером в выключеном состоянии,при подаче питания на USB тестер включается, светиться светодиод возле разъема USB +5V(зеленый)

- если инициализация прошла, то на экране надпись INIT OK, мигает светодиод OK (зеленый) и буззер кратко временно, один раз издает писк

- если инициализация не прошла, то NO INIT и моргает светодиод BAD(красный)

4. Заряд тестера происходит при подаче питания на USB 5V

не зависимо включен тестер или выключен

При заряде мигает светодиод CHARGE (зеленый) находится возле аккумулятора,по окончании заряда горит постоянно

При разряде аккумулятора горит светодиод DISCHARGE(красный) находится возле аккумулятора

5. Использованные компоненты:

                              Reference	  Value	  Footprint	                      	Qty
   
                             *R7,R1,R2	  100	    Resistor_SMD:R_0402_1005Metric	~	3
   
                              BZ1        	Buzzer	Buzzer_Beeper:MagneticBuzzer_PUI_AT-0927-TT-6-R	~	1
   
                              C*7	        *2.2uF	Capacitor_SMD:C_0402_1005Metric	~	1
   
                              C1,C6,C7	  10uF	  Capacitor_SMD:C_0603_1608Metric	~	3
   
                              C2,C5	      10uF	  Capacitor_SMD:C_1206_3216Metric		2
   	
                              C3,C8,C12  	0.1uF	  Capacitor_SMD:C_0402_1005Metric	~	3
   
                              C4,C9	      1uF	    Capacitor_SMD:C_0402_1005Metric	~	2
   
                              C10,C11	    22pF	  Capacitor_SMD:C_0402_1005Metric	~	2
   
                              D1	    LED CHARGE	LED_SMD:LED_0603_1608Metric	~	1
   
                              D2	    LED DISCHARGE	LED_SMD:LED_0603_1608Metric	~	1
   
                              D3	        VUSB	  LED_SMD:LED_0603_1608Metric	~	1
   
                              D4	      1N4148W	  Diode_SMD:D_SOD-123	https://www.vishay.com/docs/85748/1n4148w.pdf	1
   
                              D5	        SS34	  Diode_SMD:D_SOD-123	https://www.vishay.com/docs/88751/ss32.pdf	1
   
                              D6,D7	    -DATA_TX	LED_SMD:LED_0603_1608Metric	~	2
   
                              D8	      BAD	LED   SMD:LED_0603_1608Metric	~	1
   
                              D9	        OK	    LED_SMD:LED_0603_1608Metric	~	1
   
                              F1	      500mA	    Fuse:Fuse_1206_3216Metric	~	1
   
                              J1	      USB_A	    Connector_USB:USB_A_CNCTech_1001-011-01101_Horizontal	~	1

                              J2	        BAT    	Connector_Wire:SolderWire-0.1sqmm_1x02_P3.6mm_D0.4mm_OD1mm	~	1
   	
                              J3	    Conn_01x04_Pin	Connector_Molex:Molex_KK-254_AE-6410-04A_1x04_P2.54mm_Vertical	~	1
   
                              L1	        1R5	    Inductor_SMD:L_1206_3216Metric	~	1
   
                              R*7	        *1.5	  Resistor_SMD:R_0402_1005Metric	~	1
   
R3,R4,R5,R6,R10,R11,R12,R13,R14,R15	      1K	    Resistor_SMD:R_0402_1005Metric	~	10		

                              R7	        4K7	    Resistor_SMD:R_0402_1005Metric	~	1			
                              
                              R8,R9	      22R	    Resistor_SMD:R_0402_1005Metric	~	2			
                              
                              R16	        200R	  Resistor_SMD:R_0402_1005Metric	~	1			
                              
                              SW1	      SW_SPDT_321	Connector_Molex:Molex_KK-254_AE-6410-03A_1x03_P2.54mm_Vertical	~	1			
                              
                              U1	    ATmega32U4-M	Package_DFN_QFN:QFN-44-1EP_7x7mm_P0.5mm_EP5.2x5.2mm	http://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-7766-8-bit-AVR-ATmega16U4-32U4_Datasheet.pdf	1		
                              
                              U2	        TP4333	Package_SO:SOP-8_3.9x4.9mm_P1.27mm		1			
                              
                              Y1	        16MHz	  Crystal:Crystal_SMD_0603-4Pin_6.0x3.5mm	https://foxonline.com/wp-content/uploads/pdfs/T5HN_T5HV.pdf	1
                              
6.Использованные инструменты: Паяльная станция с жалом типа "топорик", жало для пайки SMD типа C245-IS, паяльный фен 858D+, блок питания лабораторный KORAD 3005, осциллограф RIGOL, фрезерный станок CHARLY4U, система лазерной маркировки MINIMARKER2, пинцеты,
припой ПОС61, флюс NC559, скальпель, изопропанол, жилы кабеля МГТФ.
7. Пррблемы и трудности: Из-за малых габаритов устройства метод фрезерования оказался неэффективным, толщины дорожек слишком малы и их изготовление не может быть обеспечено ручной настройкой и точностью фрезерного станка. После первой и последней успешной попытки
изготовления платы, стало понятно, что плата оказалоась отзеркаленной. Дальнейшие попытки фрезерования не увенчались успехом. Были попытки изготовление на лазерном станке MINIMARKER2, которые так же оказались неудачными, вследствие термического искривления
обрабатываемой платы и следовтельно, изменнеия фокусного расстояниря в процессе гравировки. Впоследсвтии было приянто решение производить COB монтаж элементов на отзеркаленную плату. По итогам монтажа выяснилось, что некоторые функции тестера работают некорректно,
такие как проверка инициализации, нет общения и определения заниженных значений сопротивлений на одной из DATA линий, хотя работоспособность платы была проверена на плате, заказанной на сайте Резонита. В настоящее фремя удалось исправить определение кз или заниженного сопротивления на одной из двух DATA линий, так же переход в режим инициализации, но по прежнему общения с компьютером нет. 
![image](https://github.com/user-attachments/assets/7b6a7421-635c-4fe6-8f22-bf1b03f76f65)  устройство с платой РЕЗОНИТ
![image](https://github.com/user-attachments/assets/dfca402b-816e-4592-8c97-54fc24e45005)  устройство на фрезерованной плате вид снизу
![image](https://github.com/user-attachments/assets/da4c2c95-40f1-4dc7-a2b8-a9711809e370)  устройство на фрезерованной плате вид сверху

ДЕМОНСТРАЦИИ РАБОТЫ УСТРОЙСТВА НА РАЗНЫХ ПЛАТАХ 

Плата Резонит Режим инициализации

https://github.com/user-attachments/assets/325fc64f-16dd-4dcc-aebc-f22ac2b17836

Плата Резонит Режил проверки линий

https://github.com/user-attachments/assets/79fad83d-0645-4a04-acb9-413c7f19cf63

Плата Фабрика Режим инициализации и проверки линий

https://github.com/user-attachments/assets/3a48dc3f-1959-441d-91f1-0622a66661fc


